services:
  silent:
    build:
      dockerfile: silent.dockerfile
    image: silent:latest
    container_name: silent
    volumes:
      - ./results:/home/gpuot/results
    deploy:
      resources:
        limits:
          memory: 2G
        reservations:
          devices:
            - driver: nvidia
              device_ids: ['0', '1']
              capabilities: [gpu]

  ferret:
    build:
      dockerfile: ferret.dockerfile
    image: ferret:latest
    container_name: ferret
    volumes:
      - ./results:/home/gpuot/results
    deploy:
      resources:
        limits:
          memory: 2G
        reservations:
          devices:
            - driver: nvidia
              device_ids: ['0', '1']
              capabilities: [gpu]
